<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <!--<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />-->
        <title>What If</title>
        <link rel="shortcut icon" href="../images/favicon.ico" />
        <link type="text/css" rel="stylesheet" href="../css/basic.css" />
        <link type="text/css" rel="stylesheet" href="../css/jquery-ui.css" />
        <link type="text/css" rel="stylesheet" href="../css/perfect-scrollbar.css"/>
        <link type="text/css" rel="stylesheet" href="../css/custom.css" />
        <link type="text/css" rel="stylesheet" href="../css/main.css" />

        

<link type="text/css" rel="stylesheet" href="../css/responsive.css" />
        <script src="../js/plugin/jquery-1.11.0.min.js"></script>
        <script src="../js/plugin/jquery-ui.js"></script>
        <script src="../js/plugin/perfect-scrollbar.js"></script>
        <script src="../js/plugin/jquery.ui.touch-punch.js"></script>

        <link type="text/css" rel="stylesheet" href="../js/plugin/jqplot/jquery.jqplot.min.css" />
        <script src="../js/plugin/jqplot/jquery.jqplot.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.mobile.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.barRenderer.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.categoryAxisRenderer.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.pointLabels.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.highlighter.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.cursor.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.dragable.min.js"></script>
        <script src="../js/plugin/jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>

        <link type="text/css" rel="stylesheet" href="../js/plugin/SmoothDivScroll/css/smoothDivScroll.css" />
        <script src="../js/plugin/SmoothDivScroll/js/jquery.kinetic.min.js"></script>
        <script src="../js/plugin/SmoothDivScroll/js/jquery.mousewheel.min.js"></script>
        <script src="../js/plugin/SmoothDivScroll/js/jquery.smoothDivScrollcustom.js"></script>

        <script src="../js/plugin/jquery.ui.touch-punch.js"></script>

        <script src="../js/plugin/jquery-simulate-ext/libs/jquery.simulate.js"></script>
        <script src="../js/plugin/jquery-simulate-ext/src/jquery.simulate.ext.js"></script>
        <script src="../js/plugin/jquery-simulate-ext/src/jquery.simulate.drag-n-drop.js"></script>

        <!--[if lt IE 9]>
        <script src="../js/html5shiv.js"></script>
        <![endif]-->

        <style type="text/css">
            #container {width: 1000px;height: auto;z-index: 10}
            #wrap-chart1 {height:315px;width:956px;position: relative;display: block;float: left;padding: 0 34px;background-color: #FFFDF6}
            #chart1 {width:1400px;position: relative;display: block;float: left;z-index: 1}
            .wrap-dragitem {z-index:12; width:auto;min-width: 100px; display: inline-block;border:solid 1px #952754;padding: 10px;margin: 0 auto;}
			.dragitem {z-index: 210;float:left; color:#303030;/*border: solid 1px #999999;*/background: transparent;width:66px;height: 40px;z-index: 100;cursor: move;line-height: 20px;vertical-align: middle;text-align: left;opacity: .8;font-size: 12px;font-family: "Trebuchet MS",​Arial,​Helvetica,​sans-serif; color: #4F4D4E;margin-right: 2px;border-radius: 3px;opacity:.9}
            .dragitem:hover {opacity: 1;background-color: #F2F2F2;color: #000}
			
			.dragitem-other {z-index: 210;float:left; color:#303030;/*border: solid 1px #999999;*/background: transparent;width:66px;height: 40px;z-index: 100;cursor: move;line-height: 20px;vertical-align: middle;text-align: left;opacity: .8;font-size: 12px;font-family: "Trebuchet MS",​Arial,​Helvetica,​sans-serif; color: #4F4D4E;margin-right: 2px;border-radius: 3px;opacity:.9; margin-left:20px;}
            .dragitem-other:hover {opacity: 1;background-color: #F2F2F2;color: #000}			
			
            .dragitem span.icn-car {z-index: 1;background: url('../images/icns-cars.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
            .dragitem.dropped {background: url('../images/icn-goalfocus.png') no-repeat 0 0 transparent;color: transparent;border:0;margin: 0;height: 60px}
           
		
		 /************* EDUCATION ************/			 
		  .dragitem span.icn-edu {z-index: 1;background: url('../images/icns-education.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
		    .dragitem.dropped span.icn-edu {height: 60px;color: transparent}
            #dragitem1 span.icn-edu {background-position: 17px -1}
            #dragitem2 span.icn-edu {background-position: -46px 0}
			
			 .dragged1 span.icn-edu {background-position: 2px 16px}
            .dragged2 span.icn-edu {background-position: -53px 16px}
			
			
		 /************* TRAVEL ************/			 
		  .dragitem span.icn-travel {z-index: 1;background: url('../images/icns-travel.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
		    .dragitem.dropped span.icn-travel {height: 60px;color: transparent}
            #dragitem3 span.icn-travel {background-position: 17px -1}
            #dragitem4 span.icn-travel {background-position: -46px 0}
			
			 .dragged3 span.icn-travel {background-position: -1px 16px}
            .dragged4 span.icn-travel {background-position: -52px 16px}
		 
		 
		   /************* CAR ************/		   
		   .dragitem span.icn-car {z-index: 1;background: url('../images/icns-cars.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
		    .dragitem.dropped span.icn-car {height: 60px;color: transparent}
            #dragitem21 span.icn-car {background-position: 17px 0}
            #dragitem22 span.icn-car {background-position: -46px 0}
            #dragitem23 span.icn-car {background-position: -119px 0}
            #dragitem24 span.icn-car {background-position: -190px 0}
            #dragitem25 span.icn-car {background-position: -262px 0}
            #dragitem26 span.icn-car {background-position: -337px 0}

            .dragged21 span.icn-car {background-position: 17px 16px}
            .dragged22 span.icn-car {background-position: -46px 16px}
            .dragged23 span.icn-car {background-position: -119px 16px}
            .dragged24 span.icn-car {background-position: -190px 16px}
            .dragged25 span.icn-car {background-position: -262px 16px}
            .dragged26 span.icn-car {background-position: -337px 16px}
			
			
			
			 /************* PROPERTY ************/		   
		   .dragitem span.icn-property {z-index: 1;background: url('../images/icns-property.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
		    .dragitem.dropped span.icn-property {height: 60px;color: transparent}
            #dragitem5 span.icn-property {background-position: 19px 0}
            #dragitem6 span.icn-property {background-position: -36px 0}
            #dragitem7 span.icn-property {background-position: -90px 0}
            #dragitem8 span.icn-property {background-position: -143px 0}
            #dragitem9 span.icn-property {background-position: -196px 0}


            .dragged5 span.icn-property {background-position: 15px 16px}
            .dragged6 span.icn-property {background-position: -39px 16px}
            .dragged7 span.icn-property {background-position: -92px 16px}
            .dragged8 span.icn-property {background-position: -146px 16px}
            .dragged9 span.icn-property {background-position: -200px 16px}
			
			
		   /************* WEDDING ************/			 
		  .dragitem span.icn-wedding {z-index: 1;background: url('../images/icns-wedding.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center}
		    .dragitem.dropped span.icn-wedding {height: 60px;color: transparent}
          #dragitem10 span.icn-wedding {background-position: 17px -1px}
           #dragitem11 span.icn-wedding {background-position: -29px 0}
			
			.dragged10 span.icn-wedding {background-position: 14px 17px}
            .dragged11 span.icn-wedding {background-position: -30px 15px}
			
			
		   /************* BUSINESS ************/	
		   .dragitem span.icn-business {z-index: 1;background: url('../images/icns-business.png') no-repeat 0 0 transparent;width: 66px;height: 40px;
		   display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center; margin:0}
		   
		    .dragitem.dropped span.icn-business {height: 60px;color: transparent}
            #dragitem12 span.icn-business {background-position: 4px 0}
			
			 .dragged12 span.icn-business {background-position: 4px 16px}
		   
		   		 
			 
			 
			 /************* SPECIAL GOALS ************/			 
		  .dragitem-other span.icn-special {z-index: 1;background: url('../images/icns-special.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center; margin:0px 0px 0px 0px;}
		    .dragitem-other.dropped span.icn-special {height: 60px;color: transparent}
            #dragitem13 span.icn-special {background-position: 4px 0px}
			
			 .dragged13 span.icn-special {background-position: 7px 18px}


			 /************* OTHER GOALS ************/			 
		  .dragitem-other span.icn-other {z-index: 1;background: url('../images/icns-others.png') no-repeat 0 0 transparent;width: 66px;height: 40px;display: inline-block;line-height: 68px;vertical-align: bottom;text-align: center; margin:5px 0px 0px 2px;}
		    .dragitem-other.dropped span.icn-otherl {height: 60px;color: transparent}
            #dragitem14 span.icn-other {background-position: 4px 0px}
			
			 .dragged14 span.icn-other {background-position: 4px 16px}




			
			

            .jqplot-goal-tooltip {background: none repeat scroll 0 0 #F1F1F1;border: 1px solid #952754;border-radius: 3px;color: #000000;
                                  font-size:10px;opacity: .8;width: 60px;height: 30px;line-height:14px;left: -60px;padding: 3px;position: absolute;top: -22px;}
            .dragitem:hover .jqplot-goal-tooltip {opacity: 1}
            .jqplot-point-label {font-size: 10px}
            .jqplot-point-label:hover {color: #000}

            div.scrollingHotSpotLeft {
                background: url("../images/icns-slidenav.png") no-repeat -30px center transparent;
                /*cursor: none !important;*/
                height: 30px;
                left: 80px;
                width: 30px;min-width: 30px !important;
                position: absolute;
                z-index: 200;
                padding: 114px 0;
            }
            div.scrollingHotSpotRight {
                background: url("../images/icns-slidenav.png") no-repeat left center transparent;
                /*cursor: none !important;*/
                height: 30px;
                right: 0;
                width: 30px;min-width: 30px !important;
                position: absolute;
                z-index: 200;
                padding: 114px 0;
            }
            .jqplot-yaxis {position: absolute !important;z-index: 111;background: #fff}
            .jqplot-yaxis-tick {right: 2px}
            //.jqplot-xaxis-label {left: 300px !important}
            .scrollWrapper {z-index:11}

            #nav-goals {position: relative;height: 160px}
            #nav-goals #nav-main {background-color: #F2F2F2;/*padding-top: 20px;*/}
            #nav-goals ul {position: relative;display: inline-block;margin: 0;height: 78px;clear: both}
            #nav-goals ul li {position: relative;list-style: none;width:60px;height: 78px;line-height: 120px;vertical-align: bottom; text-align: center; float:left;background-color: #F2F2F2;color: #747474;
                              margin: 0 30px 0;cursor: pointer;z-index: 12;border: solid 1px transparent;border-bottom: 0;
                              background: url('../images/icns-goals.png') no-repeat 0 0 transparent;}
            #nav-goals ul li:first-child {margin-left: 10px}
            #nav-goals ul li:hover, #nav-goals ul li.active {}
            #nav-goals ul li.active {height: 80px;border: solid 1px #962855;color: #962855;border-bottom: 0;background-color: #fff;z-index: 14;}
            #nav-goals ul li.edu {background-position: 10px top}
            #nav-goals ul li.travel {background-position: -117px top}
            #nav-goals ul li.car {background-position: -244px top}
            #nav-goals ul li.property {background-position: -368px top}
            #nav-goals ul li.wedding {background-position: -495px top}
            #nav-goals ul li.business {background-position: -622px top}
            #nav-goals ul li.spc_goals {background-position: -745px top}
            #nav-goals ul li.others {background-position: -870px top}
            #pnl-dragitems {position: relative;}
            #wrap-dragitems {z-index: 11; width: 100%;height: 54px;background-color: #FFFFFF;clear:both;position: absolute;top: 100px}
			#wrap-dragitems-travel {z-index: 11; width: 100%;height: 54px;background-color: #FFFFFF;clear:both;position: absolute;top: 100px}
            #wrap-dragitems .wrap-dragitem {display:none;background-color: #fff;z-index: 10;width:auto;height: 40px;position: absolute;padding: 6px}
            #wrap-dragitems .wrap-dragitem.car {width: 420px;left: 100px}
			
			.education-align{margin:-20px 0px 0px 0px;}
			.car-align{margin:-20px 0px 0px 0px;}
			.travel-align{margin:-20px 0px 0px 122px;}
			.property-align{margin:-20px 0px 0px 270px;}
			.wedding-align{margin:-20px 0px 0px 495px;}
			.business-align{margin:-20px 0px 0px 632px;}
			.special-align{margin:-20px 0px 0px 757px;}
			.other-align{margin:-20px 0px 0px 876px;}
			
        </style>
        <script type="text/javascript">
            var gbArrData = [];
            var gbArrDataDB = [{"gridpos": {"x": 59.5, "y": 200}, "datapos": {"xaxis": 11.227919161676647, "yaxis": 0.8264462809917319, "x2axis": null, "y2axis": null, "y3axis": null, "y4axis": null, "y5axis": null, "y6axis": null, "y7axis": null, "y8axis": null, "y9axis": null, "yMidAxis": null}, "clonediv": "clonediv1", "dragitem": "dragitem21"}, {"gridpos": {"x": 667.5, "y": 119}, "datapos": {"xaxis": 19.985404191616766, "yaxis": 40.99173553719008, "x2axis": null, "y2axis": null, "y3axis": null, "y4axis": null, "y5axis": null, "y6axis": null, "y7axis": null, "y8axis": null, "y9axis": null, "yMidAxis": null}, "clonediv": "clonediv2", "dragitem": "dragitem24"}, {"gridpos": {"x": 534.5, "y": 159}, "datapos": {"xaxis": 16.102919161676645, "yaxis": 21.15702479338843, "x2axis": null, "y2axis": null, "y3axis": null, "y4axis": null, "y5axis": null, "y6axis": null, "y7axis": null, "y8axis": null, "y9axis": null, "yMidAxis": null}, "clonediv": "clonediv3", "dragitem": "dragitem24"}];

            (function($) {
                /**
                 *  Namespace: the namespace the plugin is located under
                 *  pluginName: the name of the plugin
                 */
                var extensionMethods = {
                    getEventPosition: function(ev) {
                        var plot = ev.data.plot;
                        var go = plot.eventCanvas._elem.offset();
                        var gridPos = {x: ev.pageX - go.left, y: ev.pageY - go.top};
                        var dataPos = {xaxis: null, yaxis: null, x2axis: null, y2axis: null, y3axis: null, y4axis: null, y5axis: null, y6axis: null, y7axis: null, y8axis: null, y9axis: null, yMidAxis: null};
                        var an = ['xaxis', 'yaxis', 'x2axis', 'y2axis', 'y3axis', 'y4axis', 'y5axis', 'y6axis', 'y7axis', 'y8axis', 'y9axis', 'yMidAxis'];
                        var ax = plot.axes;
                        var n, axis;
                        for (n = 11; n > 0; n--) {
                            axis = an[n - 1];
                            if (ax[axis].show) {
                                dataPos[axis] = ax[axis].series_p2u(gridPos[axis.charAt(0)]);
                            }
                        }

                        return {offsets: go, gridPos: gridPos, dataPos: dataPos};
                    },
                    /*
                     * retrieve the id of the element
                     * this is some context within the existing plugin
                     */
                    getTooltipDataPosition: function(ev, plot, itmid) {
                        var c = plot.plugins.cursor;
                        var s = '';
                        var addbr = false;

                        ev.data = {'plot': plot};
                        var positions = $.jqplot.Cursor.prototype.getEventPosition(ev);

                        var gridpos = positions.gridPos;
                        var datapos = positions.dataPos;

                        var g;
                        for (var i = 0; i < c.tooltipAxisGroups.length; i++) {
                            g = c.tooltipAxisGroups[i];
                            if (addbr) {
                                s += '<br />';
                            }
                            if (c.useAxesFormatters) {
                                for (var j = 0; j < g.length; j++) {
                                    if (j) {
                                        s += ', ';
                                    }
                                    var af = plot.axes[g[j]]._ticks[0].formatter;
                                    var afstr = plot.axes[g[j]]._ticks[0].formatString;
                                    s += af(afstr, datapos[g[j]]);
                                }
                            } else {
                                s += $.jqplot.sprintf(c.tooltipFormatString, datapos[g[0]], datapos[g[1]]);
                            }
                            addbr = true;
                        }

                        $('#' + itmid).children('.jqplot-goal-tooltip').remove();
                        var elem = document.createElement('div');
                        var pts = s.split(',');
                        $(elem).addClass('jqplot-goal-tooltip').html('<strong>Amt Rs. </strong>' + pts[1] + '<br/><strong>Year </strong>' + pts[0]);

                        if (gridpos.y < 42) {
                            $(elem).css({'top': '50px'})
                        }
                        if (gridpos.x < 120) {
                            $(elem).css({'left': '60px'})
                        }
                        $('#' + itmid).append(elem);

                        $('.jqplot-goal-canvas-' + itmid).remove();
                        $.jqplot.Cursor.prototype.drawLine(gridpos.x, gridpos.y, {}, plot, itmid);

                        var itmNumber = $('#' + itmid).attr('class').match(/dragged(\d+)/)[1];
                        var arrdata = {};
                        arrdata.gridpos = gridpos;
                        arrdata.datapos = datapos;
                        arrdata.clonediv = itmid;
                        arrdata.dragitem = "dragitem" + itmNumber;
                        var arrkfound = false;
                        $.each(gbArrData, function(k, v) {
                            if (v.clonediv == itmid) {
                                gbArrData[k] = arrdata;
                                arrkfound = true;
                            }
                        });
                        if (!arrkfound) {
                            gbArrData.push(arrdata);
                        }

                        $('#datapos').html(JSON.stringify(gbArrData));

                        return s;
                    },
                    drawLine: function(bx, by, opts, plot, itmid) {
                        var canvas = new $.jqplot.GenericCanvas();
                        plot.eventCanvas._elem.before(canvas.createElement(plot._gridPadding, 'jqplot-goal-canvas-' + itmid, plot._plotDimensions, plot));
                        canvas.setContext();
                        var ctx = canvas._ctx;
                        ctx.save();
                        opts = opts || {lineCap: 'square', strokeStyle: 'blue', lineWidth: 3};
                        if (opts.lineWidth == null || opts.lineWidth != 0) {
                            $.extend(true, ctx, opts);
                            var lncolor = '#726F6F';// $.jqplot.Cursor.prototype.getRandomColor();

                            /*if (typeof ctx.setLineDash !== 'undefined') {
                             ctx.setLineDash([3, 4]);
                             }
                             ctx.strokeStyle = lncolor;// '#75BE00';
                             ctx.lineWidth = 1;
                             ctx.beginPath();
                             ctx.moveTo(0, (by + 0.5));
                             ctx.lineTo(bx, (by + 0.5));
                             ctx.closePath();
                             ctx.stroke();
                             ctx.restore();*/

                            if (typeof ctx.setLineDash !== 'undefined') {
                                ctx.setLineDash([3, 4]);
                            }
                            ctx.strokeStyle = lncolor;
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo((bx + 0.5), by);
                            ctx.lineTo((bx + 0.5), by + bx);
                            ctx.closePath();
                            ctx.stroke();
                            ctx.restore();
                        }
                    },
                    getRandomColor: function() {
                        var letters = '0123456789ABCDEF'.split('');
                        var color = '#';
                        for (var i = 0; i < 6; i++) {
                            color += letters[Math.floor(Math.random() * 16)];
                        }
                        return color;
                    }
                };

                $.extend(true, $.jqplot.Cursor.prototype, extensionMethods);
            })(jQuery);

            $(document).ready(function() {
                var s1 = [10, 12, -14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86];
                // Ticks should match up one for each y value (category) in the series.
                var ticks = [2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2033, 2034, 2035, 2036, 2037, 2038, 2039, 2040, 2041, 2042, 2043, 2044, 2045, 2046, 2047, 2048, 2049, 2050];

                $.jqplot.DateTickFormatter = function(format, value) {
                    return ticks[Math.round(value) - 1];
                };

                $.jqplot.config.enablePlugins = true;

                var plot1 = $.jqplot('chart1', [s1], {
                    //stackSeries: true,
                    captureRightClick: true,
                    // Turns on animatino for all series in this plot.
                    animate: true,
                    // Will animate plot on calls to plot1.replot({resetAxes:true})
                    //animateReplot: true,
                    series: [
                        {label: 'Available Funds'},
                        {label: 'Goal Expected'},
                        {label: 'Assigned'}
                    ],
                    seriesColors: ['#A6A6A6'],
                    seriesDefaults: {
                        renderer: $.jqplot.BarRenderer,
                        shadow: false,
                        //lineWidth: 5,
                        rendererOptions: {
                            fillToZero: true,
                            barPadding: 0,
                            barMargin: 2,
                            barDirection: 'vertical',
                            barWidth: 12,
                            varyBarColor: false,
                            highlightMouseOver: true,
                            highlightMouseDown: false,
                            highlightColor: null,
                            barImageSrc: '../images/bar-chartbarbg.png'
                        },
                        pointLabels: {show: true, location: 's', ypadding: 3}
                    },
                    axesDefaults: {
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                    },
                    legend: {
                        show: true,
                        placement: 'insideGrid',
                        location: 'nw'
                    },
                    axes: {
                        xaxis: {
                            label: 'Years(Goals Duration)',
                            ticks: ticks,
                            renderer: $.jqplot.CategoryAxisRenderer,
                            //tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                            formatString: '%d',
                            tickOptions: {
                                formatter: $.jqplot.DateTickFormatter
                            }
                        },
                        yaxis: {
                            label: 'Amt Rs.(in lacs)',
                            pad: 0.05
                        }
                    },
                    cursor: {
                        show: false,
                        followMouse: false,
                        useAxesFormatters: true,
                        showTooltipUnitPosition: true,
                        tickOptions: {
                            formatter: $.jqplot.DateTickFormatter
                        }
                    },
                    highlighter: {
                        show: true,
                        tooltipAxes: 'both',
                        yvalues: 1
                    },
                    grid: {
                        drawGridLines: true,
                        borderWidth: 0,
                        shadow: false
                    }
                });

                counter = 0;
                $(".dragitem").draggable({
                    helper: 'clone',
                    cursorAt: {left: 30, top: 30},
                    start: function(ev, ui) {
                        if ($(this).attr('class').search(/dragitem(\d+)/) == -1) {
                            var itmNumber = $(this).attr('id').match(/dragitem(\d+)/)[1];
                            $(ui.helper).addClass("dragged" + itmNumber);
                        }
                    },
                    stop: function(ev, ui) {
                        objName = "#clonediv" + counter;
                        var tpos = $('#chart1').offset();
                        $(objName).css({
                            'left': ev.pageX - tpos.left - 30,
                            'top': ev.pageY - tpos.top - 30,
                            'position': 'absolute'
                        });
                        $(objName).removeClass("drag");
                        //When an existiung object is dragged
                        $(objName).draggable({
                            containment: 'parent',
                            cursorAt: {left: 30, top: 30},
                            drag: function(ev, ui) {
                                var ps = ($.jqplot.Cursor.prototype.getTooltipDataPosition(ev, plot1, $(this).attr('id')));
                            },
                            revert: function(event) {
                                $(this).data("uiDraggable").originalPosition = {
                                    top: 0,
                                    left: 0
                                };
                                if (event === false) {
                                    var itmNumber = $(this).attr('class').match(/dragged(\d+)/)[1];
                                    var eoff = $('#dragitem' + itmNumber).position();
                                    var tpos = $('#chart1').position();
                                    var clonediv = $(this).attr('id');
                                    $(this).animate({top: eoff.top - tpos.top + 'px', left: eoff.left - tpos.left + 'px'}, 500, function() {
                                        $.each(gbArrData, function(k, v) {
                                            if (v && v.clonediv == clonediv) {
                                                gbArrData.splice(k, 1);
                                                $('#datapos').html(JSON.stringify(gbArrData));
                                            }
                                        });
                                        $(this).remove();
                                    });
                                }
                                return !event;
                            },
                        });
                    }
                });

                $('.jqplot-event-canvas').droppable({
                    containment: ".jqplot-series-shadowCanvas",
                    cancel: ".title",
                    accept: '.dragitem',
                    //tolerance: 'touch',
                    drop: function(ev, ui) {
                        ev.stopImmediatePropagation();
                        if (ui.draggable.attr('id').search(/dragitem[0-9]/) != -1) {
                            counter++;
                            var element = $(ui.draggable).clone();
                            element.addClass("tempclass");
                            $(this).after(element);
                            $(".tempclass").attr("id", "clonediv" + counter);
                            $("#clonediv" + counter).removeClass("tempclass");
                            //Get the dynamically item id
                            draggedNumber = ui.draggable.attr('id').search(/dragitem(\d+)/);
                            itemDragged = "dragged" + RegExp.$1;
                            $("#clonediv" + counter).addClass(itemDragged);
                            draggedNumber = counter;
                        } else {
                            draggedNumber = $(ui.draggable).attr('id').match(/clonediv(\d+)/)[1];
                        }
                        $("#clonediv" + draggedNumber).addClass("dropped");
                        var ps = ($.jqplot.Cursor.prototype.getTooltipDataPosition(ev, plot1, "clonediv" + draggedNumber));
                    },
                    out: function(event, ui) {

                        $('.jqplot-goal-canvas-' + $(ui.draggable).attr('id')).remove();
                        $(ui.draggable).children('.jqplot-goal-tooltip').remove();
                        $(ui.draggable).removeClass('dropped');
                    }
                });

                $('#wrap-chart1').smoothDivScroll({
                    mousewheelScrolling: "",
                    manualContinuousScrolling: false,
                    autoScrollingMode: "",
                    hiddenOnStart: false,
                    hotSpotScrolling: true,
                    hotSpotScrollingStep: 15, // Pixels
                    hotSpotScrollingInterval: 100,
                    easingAfterHotSpotScrolling: false
                });
                $('.jqplot-xaxis-label').css({'left': '400px'});

                $.each(gbArrDataDB, function(k, nv) {
                    autoDragGoal(nv.dragitem, nv.gridpos.x, nv.gridpos.y);
                });


            });

            function findCenter2(elem) {
                var offset, $elem = $(elem);
                offset = $elem.offset();
                return {
                    x: offset.left + $elem.outerWidth() / 2,
                    y: offset.top + $elem.outerHeight() / 2
                };
            }

            function autoDragGoal(goalid, x, y) {
                var $dropTarget = $('.jqplot-event-canvas');
                var dropOffset = $dropTarget.offset();
                var nx = findCenter2($dropTarget);
                $('#' + goalid).simulate("drag-n-drop", {
                    dropTarget: $dropTarget,
                    dx: 0,
                    dy: 0,
                    callback: function() {
                        //var latestdrop = $('.dragitem.dropped').length-1;
                        $('.dragitem.dropped').eq(0).simulate("drag", {
                            dx: x - nx.x + dropOffset.left - 3.5,
                            dy: y - nx.y + dropOffset.top
                        }).simulate("drop");
                    }
                });
            }

        </script>
        <script>
            $(document).ready(function() {
                $('#nav-goals ul li').on('click', function(e) {
                    e.stopImmediatePropagation();
                    var glclass = $(this).attr('class');
                    $('.wrap-dragitem').not('.' + glclass).slideUp();
                    $('#nav-goals ul li').not(this).removeClass('active');
                    $('.wrap-dragitem.' + glclass).slideToggle();

                    if ($(this).hasClass('active')) {
                        $(this).removeClass('active');
                    } else {
                        $(this).addClass('active');
                    }
                });

            });
        </script>
    </head>
    <body>
        <!-- Wrapper starts-->
        <div class="wrapper">
            <!-- Main starts-->
            <section class="main">
                <!-- Common_content Starts-->
                <section class="content common_content">
                    <!-- Common_in_contnet starts-->
                    <section class="in_content common_in_content clearfix" id="what_if">
                        <div class="top">
                            <div class="show clearfix">
                                <p><span>What If</span> Analysis </p>
                                <div class="arrow"></div>
                            </div>
                            <div id="initial_asset" class="display_box clearfix"><div class="icon"></div><p class="txt">Intial asset value</p><div class="value">3,55,000.00</div><div class="action">+</div></div>
                            <div id="monthly_saving" class="display_box clearfix"><p class="txt">Monthly Savings</p><div class="value">5,000.00</div></div>
                            <a class="back" href="../../partner/dashboard">Back</a>
                        </div>
                        <div id="container" class="clearfix">
                            <div id="wrap-chart1">
                                <div id="chart1"></div>
                            </div>
                        </div>
                        <div id="nav-goals" class="clearfix">
                            <div id="nav-main">
                                <ul>
                                    <li class="edu"><span class="name">Education</span></li>
                                    <li class="travel"><span class="name">Travel</span></li>
                                    <li class="car"><span class="name">Car</span></li>
                                    <li class="property"><span class="name">Property</span></li>
                                    <li class="wedding"><span class="name">Wedding</span></li>
                                    <li class="business"><span class="name">Buisness</span></li>
                                    <li class="spc_goals"><span class="name">Special Goals</span></li>
                                    <li class="others"><span class="name">Others</span></li>
                                </ul>
                            </div>
                            <div id="wrap-dragitems" class="clearfix">
                                <div class="wrap-dragitem edu education-align">
                                    <div class="dragitem" id="dragitem1"><span class="icn-edu">Domestic</span></div>
                                    <div class="dragitem" id="dragitem2"><span class="icn-edu">International</span></div>
                                </div>
                                <div class="wrap-dragitem travel-align travel">
                                    <div class="dragitem" id="dragitem3"><span class="icn-travel">Domestic</span></div>
                                    <div class="dragitem" id="dragitem4"><span class="icn-travel">International</span></div>
                                </div>
                                <div class="wrap-dragitem car car-align">
                                    <div class="dragitem" id="dragitem21"><span class="icn-car">Mini Car</span></div>
                                    <div class="dragitem" id="dragitem22"><span class="icn-car">Sports Car</span></div>
                                    <div class="dragitem" id="dragitem23"><span class="icn-car">Sedan</span></div>
                                    <div class="dragitem" id="dragitem24"><span class="icn-car">Hatchback</span></div>
                                    <div class="dragitem" id="dragitem25"><span class="icn-car">SUV</span></div>
                                    <div class="dragitem" id="dragitem26"><span class="icn-car">Wagon</span></div>
                                </div>
                                <div class="wrap-dragitem property-align property">
                                    <div class="dragitem" id="dragitem5"><span class="icn-property">Land</span></div>
                                    <div class="dragitem" id="dragitem6"><span class="icn-property">Flat</span></div>
                                    <div class="dragitem" id="dragitem7"><span class="icn-property">Row House</span></div>
                                    <div class="dragitem" id="dragitem8"><span class="icn-property">Villa</span></div>
                                    <div class="dragitem" id="dragitem9"><span class="icn-property">Commercial</span></div>                                    
                                </div>
                                <div class="wrap-dragitem wedding-align wedding">
                                    <div class="dragitem" id="dragitem10"><span class="icn-wedding">Male</span></div>
                                    <div class="dragitem" id="dragitem11"><span class="icn-wedding">Female</span></div>
                                </div>
                                <div class="wrap-dragitem business-align business">
                                    <div class="dragitem dragitem-other" id="dragitem12"><span class="icn-business">Business</span></div>
                                </div>
                                <div class="wrap-dragitem special-align spc_goals">
                                    <div class="dragitem dragitem-other" id="dragitem13"><span class="icn-special">Special</span></div>                                                                    
                                </div>
                                <div class="wrap-dragitem other-align others">
                                    <div class="dragitem dragitem-other" id="dragitem14"><span class="icn-other">Other</span></div>                                                          
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Common_in_contnet ends --> 
                </section>
                <!-- Common_content Ends--> 
            </section>
            <!-- Main ends--> 
        </div>
        <div id="datapos" style="width:100%;height:100px;background-color: #ccc;float: right;display:none"></div>
        <!-- Wrapper ends--> 
    </body>
</html>
